<!DOCTYPE html>
<html lang='en' id='html-root'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>MyBlog</title>
  <script src='https://cdn.tailwindcss.com'></script>
  <script>
    tailwind.config = { darkMode: 'class' }
  </script>
</head>
<body class='bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen transition-colors duration-300'>

<!-- NAVBAR -->
<nav class='bg-blue-700 dark:bg-blue-900 text-white px-6 py-3 flex items-center justify-between shadow-lg'>
  <a href='{% url "blog-home" %}' class='text-2xl font-bold tracking-tight'>MyBlog</a>
  <div class='flex items-center gap-4 text-sm'>
    <a href='{% url "blog-home" %}' class='hover:underline'>Home</a>
    {% if user.is_authenticated %}
      <a href='{% url "post-create" %}' class='hover:underline'>New Post</a>
      <a href='{% url "profile" %}' class='hover:underline'>Profile</a>
      <form method="POST" action="{% url 'logout' %}" class="inline">
  {% csrf_token %}
  <button type="submit" class="hover:underline bg-transparent text-white border-none cursor-pointer text-sm">
    Logout
  </button>
</form>
    {% else %}
      <a href='{% url "register" %}' class='hover:underline'>Register</a>
      <a href='{% url "login" %}' class='hover:underline'>Login</a>
    {% endif %}
    <!-- Dark Mode Toggle -->
    <button onclick='toggleDark()' class='ml-2 bg-white text-blue-700 dark:bg-gray-700 dark:text-white px-3 py-1 rounded-full text-xs font-bold'>
      ðŸŒ™ Dark
    </button>
  </div>
</nav>

<!-- FLASH MESSAGES -->
<div class='max-w-4xl mx-auto mt-4 px-4'>
  {% for message in messages %}
    <div class='bg-green-100 border border-green-400 text-green-800 px-4 py-2 rounded mb-2'>
      {{ message }}
    </div>
  {% endfor %}
</div>

<!-- MAIN CONTENT -->
<main class='max-w-4xl mx-auto px-4 py-8'>
  {% block content %}{% endblock %}
</main>

<script>
  function toggleDark() {
    document.documentElement.classList.toggle('dark');
    localStorage.setItem('dark', document.documentElement.classList.contains('dark'));
  }
  if (localStorage.getItem('dark') === 'true') {
    document.documentElement.classList.add('dark');
  }
</script>
</body>
</html>
