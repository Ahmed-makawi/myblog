{% extends 'blog/base.html' %}
{% block content %}
<h1 class='text-3xl font-bold mb-6'>All Posts</h1>
{% for post in posts %}
  <div class='bg-white dark:bg-gray-800 rounded-xl shadow p-6 mb-4'>
    {% if post.image %}
      <img src='{{ post.image.url }}' class='w-full h-48 object-cover rounded-lg mb-4'>
    {% endif %}
    <h2 class='text-xl font-semibold'>{{ post.title }}</h2>
    <p class='text-sm text-gray-500 dark:text-gray-400 mb-2'>
      By {{ post.author }} &bull; {{ post.created|date:'M d, Y' }}
    </p>
    <p class='text-gray-700 dark:text-gray-300'>{{ post.content|truncatewords:30 }}</p>
    {% if user == post.author %}
      <div class='mt-3 flex gap-3'>
        <a href='{% url "post-edit" post.pk %}' class='text-blue-500 hover:underline text-sm'>Edit</a>
        <a href='{% url "post-delete" post.pk %}' class='text-red-500 hover:underline text-sm'
           onclick='return confirm("Delete this post?")'>Delete</a>
      </div>
    {% endif %}
  </div>
{% empty %}
  <p class='text-gray-500'>No posts yet. <a href='{% url "post-create" %}' class='text-blue-500 hover:underline'>Create the first one!</a></p>
{% endfor %}
{% endblock %}
